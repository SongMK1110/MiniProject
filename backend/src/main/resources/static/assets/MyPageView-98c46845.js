import{U as Q,r as i,Q as W,a as m,e as f,o,c as n,b as e,g as X,H as Y,k as h,t as v,w as y,v as b,F as ee,l as se,m as te,q as ae,s as le,x as oe,y as ne,z as ie,A as ce,B as ue,C as pe,D as re,E as _e,G as de,I as ve,J as ge,K as me,p as fe,j as he,_ as ye}from"./index-ecfce85c.js";const u=C=>(fe("data-v-3ffc1d88"),C=C(),he(),C),be={class:"my-page"},we=u(()=>e("h2",null,"마이 페이지",-1)),ke={class:"user-info"},xe={class:"profile-picture"},Ce=["src"],je={style:{position:"absolute"}},Pe={key:0},$e={key:1},Fe={style:{"margin-top":"5px"}},Ie={class:"info"},Ve={class:"item"},Me=u(()=>e("span",{class:"label"},"아이디:",-1)),Ue={class:"value"},Ne={class:"item"},Ee=u(()=>e("span",{class:"label"},"비밀번호:",-1)),ze={key:0,class:"value"},De={key:1,class:"value"},Se={class:"password-change-fields"},Ae=u(()=>e("label",{for:"current-pw"},"현재 비밀번호:",-1)),Be=u(()=>e("label",{for:"new-pw"},"신규 비밀번호:",-1)),Ze=u(()=>e("label",{for:"confirm-new-pw"},"신규 비밀번호 재 입력:",-1)),He={class:"item"},Re=u(()=>e("span",{class:"label"},"이름:",-1)),Te={class:"value"},qe={class:"item"},Ge=u(()=>e("span",{class:"label"},"닉네임:",-1)),Je={key:0,class:"value"},Ke={key:1,class:"value"},Le={class:"password-change-fields"},Oe=u(()=>e("ul",{style:{"font-size":"small"}},[e("li",null,"길이는 최대 15자 이내로 작성해주세요"),e("li",null,"중복 닉네임 불가합니다."),e("li",null,`이모티콘 및 일부 특수문자 사용 불가합니다. &<>()'/"`)],-1)),Qe={class:"item"},We=u(()=>e("span",{class:"label"},"이메일:",-1)),Xe={key:0,class:"value"},Ye={key:1,class:"value"},es={class:"password-change-fields"},ss={class:"item"},ts=u(()=>e("span",{class:"label"},"휴대전화:",-1)),as={key:0,class:"value"},ls={key:1,class:"value"},os={class:"password-change-fields"},ns={class:"item"},is=u(()=>e("span",{class:"label"},"적립금:",-1)),cs={class:"value"},us=Q({__name:"MyPageView",setup(C){function S(a){return new URL(Object.assign({"/src/assets/images/강아지이미지.jpg":se,"/src/assets/images/검정 후드티.jpg":te,"/src/assets/images/검정 후드티2.jpg":ae,"/src/assets/images/검정 후드티3.jpg":le,"/src/assets/images/고양이 이미지.png":oe,"/src/assets/images/나이키 바지.jpg":ne,"/src/assets/images/마이페이지.png":ie,"/src/assets/images/슬랙스.jpg":ce,"/src/assets/images/야구 잠바.jpg":ue,"/src/assets/images/양털 후리스.jpg":pe,"/src/assets/images/청바지.jpg":re,"/src/assets/images/체크셔츠.jpg":_e,"/src/assets/images/파란색 후드티.jpg":de,"/src/assets/images/패딩 조끼.jpg":ve,"/src/assets/images/회색 후드티.jpg":ge,"/src/assets/images/회색 후드티2.jpg":me})[`/src/assets/images/${a}`],self.location).href}function A(a){return"*".repeat(a.length)}const c=i(),w=i(!1),k=i(),g=i(),x=i(),j=i(!1),r=i(),P=i(!1),_=i(),$=i(!1),p=i(),F=i(null),I=i(!1);let d=null;const B=()=>{F.value&&F.value.click()},Z=a=>{d=a.target.files[0],d&&console.log("선택된 파일:",d.name)},H=()=>{if(d){console.log("이미지 저장",d);const a=new FormData;a.append("uploadFile",d),console.log(d.files),m.post("api/uploadImg",a,{headers:{"Content-Type":"multipart/form-data"}}).then(s=>{console.log(s)}).catch(s=>{if(console.log(s),s.response.status===500){f.push("errorForm");return}})}else console.log("파일을 선택하세요.")},R=()=>{var s;if(((s=c.value)==null?void 0:s.pw)!==k.value){alert("현재 비밀번호가 다릅니다."),k.value="";return}if(g.value!==x.value){alert("신규 비밀번호가 다릅니다."),g.value="",x.value="";return}window.confirm("변경 하시겠습니까?")&&m.post("api/updateMypage",{pw:g.value}).then(t=>{console.log(t),t.data==="success"&&location.reload()}).catch(t=>{if(console.log(t),t.response.status===500){f.push("errorForm");return}})},T=()=>{w.value=!1,k.value="",g.value="",x.value=""},q=()=>{j.value=!1,r.value=""},G=()=>{if(window.confirm("변경 하시겠습니까?")){const s=/[&<>()'"/]/g;if(r.value&&r.value.match(s)){alert("이모티콘 및 일부 특수문자 사용 불가합니다."),r.value="";return}m.post("api/updateMypage",{nickname:r.value}).then(t=>{t.data==="success"&&location.reload()}).catch(t=>{if(console.log(t),t.response.data==="duplication"){alert("중복된 닉네임 입니다.");return}if(t.response.status===500){f.push("errorForm");return}})}},J=()=>{P.value=!1,_.value=""},K=()=>{const a=window.confirm("변경 하시겠습니까?"),s=/^[A-Za-z0-9_.-]+@[A-Za-z0-9-]+\.[A-Za-z0-9.-]+$/;if(a){if(_.value&&s.test(_.value)==!1){alert("이메일형식이 올바르지 않습니다."),_.value="";return}m.post("api/updateMypage",{email:_.value}).then(t=>{t.data==="success"&&location.reload()}).catch(t=>{if(console.log(t),t.response.status===500){f.push("errorForm");return}})}},L=()=>{$.value=!1,p.value=""},O=()=>{const a=window.confirm("변경 하시겠습니까?"),s=/01[016789]-[^0][0-9]{2,3}-[0-9]{3,4}/;if(a){if(p.value&&s.test(p.value)==!1){alert("휴대폰형식이 올바르지 않습니다."),p.value="";return}m.post("api/updateMypage",{phone:p.value}).then(t=>{t.data==="success"&&location.reload()}).catch(t=>{if(console.log(t),t.response.status===500){f.push("errorForm");return}})}};return W(p,a=>{a&&(p.value=a.replace(/[^0-9]/g,"").replace(/^(\d{0,3})(\d{0,4})(\d{0,4})$/,"$1-$2-$3").replace(/(--)$/,""))}),m.get("api/selectMember").then(a=>{c.value=a.data}).catch(a=>{if(console.log(a),a.response.status===500){f.push("errorForm");return}}),(a,s)=>{var t,V,M,U,N,E,z,D;return o(),n(ee,null,[e("header",null,[X(Y)]),e("div",be,[we,e("div",ke,[e("div",xe,[c.value?(o(),n("img",{key:0,src:S((t=c.value)==null?void 0:t.img),alt:"프로필 사진"},null,8,Ce)):h("",!0),e("div",je,[I.value?(o(),n("div",$e,[e("button",{type:"button",onClick:B},"선택"),e("div",Fe,[e("button",{type:"button",onClick:H,style:{"margin-right":"5px"}},"저장"),e("button",{type:"button",onClick:s[1]||(s[1]=l=>I.value=!1)},"취소")]),e("input",{type:"file",ref_key:"fileInput",ref:F,style:{display:"none"},onChange:Z},null,544)])):(o(),n("div",Pe,[e("button",{type:"button",onClick:s[0]||(s[0]=l=>I.value=!0)},"변경")]))])]),e("div",Ie,[e("div",Ve,[Me,e("span",Ue,v((V=c.value)==null?void 0:V.id),1)]),e("div",Ne,[Ee,c.value&&!w.value?(o(),n("span",ze,v(A((M=c.value)==null?void 0:M.pw)),1)):w.value?(o(),n("span",De,[e("div",Se,[Ae,y(e("input",{type:"password","onUpdate:modelValue":s[2]||(s[2]=l=>k.value=l)},null,512),[[b,k.value]]),Be,y(e("input",{type:"password","onUpdate:modelValue":s[3]||(s[3]=l=>g.value=l)},null,512),[[b,g.value]]),Ze,y(e("input",{type:"password","onUpdate:modelValue":s[4]||(s[4]=l=>x.value=l)},null,512),[[b,x.value]])]),e("div",{style:{"text-align":"center"}},[e("button",{type:"button",style:{margin:"5px"},onClick:T},"취소"),e("button",{type:"button",style:{margin:"5px"},onClick:R},"완료")])])):h("",!0),w.value?h("",!0):(o(),n("button",{key:2,type:"button",onClick:s[5]||(s[5]=l=>w.value=!0)},"변경"))]),e("div",He,[Re,e("span",Te,v((U=c.value)==null?void 0:U.name),1)]),e("div",qe,[Ge,j.value?(o(),n("span",Ke,[e("div",Le,[Oe,y(e("input",{type:"text","onUpdate:modelValue":s[6]||(s[6]=l=>r.value=l),placeholder:"닉네임 입력(최대 15자)",maxlength:"15"},null,512),[[b,r.value]])]),e("div",{style:{"text-align":"center"}},[e("button",{type:"button",style:{margin:"5px"},onClick:q},"취소"),e("button",{type:"button",style:{margin:"5px"},onClick:G},"완료")])])):(o(),n("span",Je,v((N=c.value)==null?void 0:N.nickname),1)),j.value?h("",!0):(o(),n("button",{key:2,type:"button",onClick:s[7]||(s[7]=l=>j.value=!0)},"변경"))]),e("div",Qe,[We,P.value?(o(),n("span",Ye,[e("div",es,[y(e("input",{type:"email","onUpdate:modelValue":s[8]||(s[8]=l=>_.value=l),placeholder:"이메일을 입력해주세요"},null,512),[[b,_.value]])]),e("div",{style:{"text-align":"center"}},[e("button",{type:"button",style:{margin:"5px"},onClick:J},"취소"),e("button",{type:"button",style:{margin:"5px"},onClick:K},"완료")])])):(o(),n("span",Xe,v((E=c.value)==null?void 0:E.email),1)),P.value?h("",!0):(o(),n("button",{key:2,type:"button",onClick:s[9]||(s[9]=l=>P.value=!0)},"변경"))]),e("div",ss,[ts,$.value?(o(),n("span",ls,[e("div",os,[y(e("input",{type:"email","onUpdate:modelValue":s[10]||(s[10]=l=>p.value=l),maxlength:"13",placeholder:"휴대폰 번호를 입력해주세요"},null,512),[[b,p.value]])]),e("div",{style:{"text-align":"center"}},[e("button",{type:"button",style:{margin:"5px"},onClick:L},"취소"),e("button",{type:"button",style:{margin:"5px"},onClick:O},"완료")])])):(o(),n("span",as,v((z=c.value)==null?void 0:z.phone),1)),$.value?h("",!0):(o(),n("button",{key:2,type:"button",onClick:s[11]||(s[11]=l=>$.value=!0)},"변경"))]),e("div",ns,[is,e("span",cs,v((D=c.value)==null?void 0:D.reserves)+"원",1)])])])])],64)}}});const rs=ye(us,[["__scopeId","data-v-3ffc1d88"]]);export{rs as default};
