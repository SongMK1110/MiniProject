import{U as O,r as i,Q,a as m,o,c as n,b as e,g as W,H as X,k as f,t as v,w as y,v as b,F as Y,l as ee,m as se,q as te,s as ae,x as le,y as oe,z as ne,A as ie,B as ce,C as ue,D as pe,E as _e,G as re,I as de,J as ve,K as ge,p as me,j as fe,_ as ye}from"./index-6da869ab.js";const u=x=>(me("data-v-70393cce"),x=x(),fe(),x),be={class:"my-page"},he=u(()=>e("h2",null,"마이 페이지",-1)),we={class:"user-info"},ke={class:"profile-picture"},xe=["src"],Ce={style:{position:"absolute"}},je={key:0},Pe={key:1},$e={style:{"margin-top":"5px"}},Ie={class:"info"},Ve={class:"item"},Me=u(()=>e("span",{class:"label"},"아이디:",-1)),Ue={class:"value"},Ne={class:"item"},Ee=u(()=>e("span",{class:"label"},"비밀번호:",-1)),Fe={key:0,class:"value"},ze={key:1,class:"value"},De={class:"password-change-fields"},Se=u(()=>e("label",{for:"current-pw"},"현재 비밀번호:",-1)),Ae=u(()=>e("label",{for:"new-pw"},"신규 비밀번호:",-1)),Be=u(()=>e("label",{for:"confirm-new-pw"},"신규 비밀번호 재 입력:",-1)),Ze={class:"item"},He=u(()=>e("span",{class:"label"},"이름:",-1)),Re={class:"value"},Te={class:"item"},qe=u(()=>e("span",{class:"label"},"닉네임:",-1)),Ge={key:0,class:"value"},Je={key:1,class:"value"},Ke={class:"password-change-fields"},Le=u(()=>e("ul",{style:{"font-size":"small"}},[e("li",null,"길이는 최대 15자 이내로 작성해주세요"),e("li",null,"중복 닉네임 불가합니다."),e("li",null,`이모티콘 및 일부 특수문자 사용 불가합니다. &<>()'/"`)],-1)),Oe={class:"item"},Qe=u(()=>e("span",{class:"label"},"이메일:",-1)),We={key:0,class:"value"},Xe={key:1,class:"value"},Ye={class:"password-change-fields"},es={class:"item"},ss=u(()=>e("span",{class:"label"},"휴대전화:",-1)),ts={key:0,class:"value"},as={key:1,class:"value"},ls={class:"password-change-fields"},os={class:"item"},ns=u(()=>e("span",{class:"label"},"적립금:",-1)),is={class:"value"},cs=O({__name:"MyPageView",setup(x){function D(a){return new URL(Object.assign({"/src/assets/images/강아지이미지.jpg":ee,"/src/assets/images/검정 후드티.jpg":se,"/src/assets/images/검정 후드티2.jpg":te,"/src/assets/images/검정 후드티3.jpg":ae,"/src/assets/images/고양이 이미지.png":le,"/src/assets/images/나이키 바지.jpg":oe,"/src/assets/images/마이페이지.png":ne,"/src/assets/images/슬랙스.jpg":ie,"/src/assets/images/야구 잠바.jpg":ce,"/src/assets/images/양털 후리스.jpg":ue,"/src/assets/images/청바지.jpg":pe,"/src/assets/images/체크셔츠.jpg":_e,"/src/assets/images/파란색 후드티.jpg":re,"/src/assets/images/패딩 조끼.jpg":de,"/src/assets/images/회색 후드티.jpg":ve,"/src/assets/images/회색 후드티2.jpg":ge})[`/src/assets/images/${a}`],self.location).href}function S(a){return"*".repeat(a.length)}const c=i(),h=i(!1),w=i(),g=i(),k=i(),C=i(!1),_=i(),j=i(!1),r=i(),P=i(!1),p=i(),$=i(null),I=i(!1);let d=null;const A=()=>{$.value&&$.value.click()},B=a=>{d=a.target.files[0],d&&console.log("선택된 파일:",d.name)},Z=()=>{if(d){console.log("이미지 저장",d);const a=new FormData;a.append("uploadFile",d),console.log(d.files),m.post("api/uploadImg",a,{headers:{"Content-Type":"multipart/form-data"}}).then(s=>{console.log(s)}).catch(s=>{if(console.log(s),s.response.status===500){alert("서버 오류 발생");return}})}else console.log("파일을 선택하세요.")},H=()=>{var s;if(((s=c.value)==null?void 0:s.pw)!==w.value){alert("현재 비밀번호가 다릅니다."),w.value="";return}if(g.value!==k.value){alert("신규 비밀번호가 다릅니다."),g.value="",k.value="";return}window.confirm("변경 하시겠습니까?")&&m.post("api/updateMypage",{pw:g.value}).then(t=>{console.log(t),t.data==="success"&&location.reload()}).catch(t=>{if(console.log(t),t.response.status===500){alert("서버 오류 발생");return}})},R=()=>{h.value=!1,w.value="",g.value="",k.value=""},T=()=>{C.value=!1,_.value=""},q=()=>{if(window.confirm("변경 하시겠습니까?")){const s=/[&<>()'"/]/g;if(_.value&&_.value.match(s)){alert("이모티콘 및 일부 특수문자 사용 불가합니다."),_.value="";return}m.post("api/updateMypage",{nickname:_.value}).then(t=>{t.data==="success"&&location.reload()}).catch(t=>{if(console.log(t),t.response.data==="duplication"){alert("중복된 닉네임 입니다.");return}if(t.response.status===500){alert("서버 오류 발생");return}})}},G=()=>{j.value=!1,r.value=""},J=()=>{const a=window.confirm("변경 하시겠습니까?"),s=/^[A-Za-z0-9_.-]+@[A-Za-z0-9-]+\.[A-Za-z0-9.-]+$/;if(a){if(r.value&&s.test(r.value)==!1){alert("이메일형식이 올바르지 않습니다."),r.value="";return}m.post("api/updateMypage",{email:r.value}).then(t=>{t.data==="success"&&location.reload()}).catch(t=>{if(console.log(t),t.response.status===500){alert("서버 오류 발생");return}})}},K=()=>{P.value=!1,p.value=""},L=()=>{const a=window.confirm("변경 하시겠습니까?"),s=/01[016789]-[^0][0-9]{2,3}-[0-9]{3,4}/;if(a){if(p.value&&s.test(p.value)==!1){alert("휴대폰형식이 올바르지 않습니다."),p.value="";return}m.post("api/updateMypage",{phone:p.value}).then(t=>{t.data==="success"&&location.reload()}).catch(t=>{if(console.log(t),t.response.status===500){alert("서버 오류 발생");return}})}};return Q(p,a=>{a&&(p.value=a.replace(/[^0-9]/g,"").replace(/^(\d{0,3})(\d{0,4})(\d{0,4})$/,"$1-$2-$3").replace(/(--)$/,""))}),m.get("api/selectMember").then(a=>{c.value=a.data}).catch(a=>{if(console.log(a),a.response.status===500){alert("서버 오류 발생");return}}),(a,s)=>{var t,V,M,U,N,E,F,z;return o(),n(Y,null,[e("header",null,[W(X)]),e("div",be,[he,e("div",we,[e("div",ke,[c.value?(o(),n("img",{key:0,src:D((t=c.value)==null?void 0:t.img),alt:"프로필 사진"},null,8,xe)):f("",!0),e("div",Ce,[I.value?(o(),n("div",Pe,[e("button",{type:"button",onClick:A},"선택"),e("div",$e,[e("button",{type:"button",onClick:Z,style:{"margin-right":"5px"}},"저장"),e("button",{type:"button",onClick:s[1]||(s[1]=l=>I.value=!1)},"취소")]),e("input",{type:"file",ref_key:"fileInput",ref:$,style:{display:"none"},onChange:B},null,544)])):(o(),n("div",je,[e("button",{type:"button",onClick:s[0]||(s[0]=l=>I.value=!0)},"변경")]))])]),e("div",Ie,[e("div",Ve,[Me,e("span",Ue,v((V=c.value)==null?void 0:V.id),1)]),e("div",Ne,[Ee,c.value&&!h.value?(o(),n("span",Fe,v(S((M=c.value)==null?void 0:M.pw)),1)):h.value?(o(),n("span",ze,[e("div",De,[Se,y(e("input",{type:"password","onUpdate:modelValue":s[2]||(s[2]=l=>w.value=l)},null,512),[[b,w.value]]),Ae,y(e("input",{type:"password","onUpdate:modelValue":s[3]||(s[3]=l=>g.value=l)},null,512),[[b,g.value]]),Be,y(e("input",{type:"password","onUpdate:modelValue":s[4]||(s[4]=l=>k.value=l)},null,512),[[b,k.value]])]),e("div",{style:{"text-align":"center"}},[e("button",{type:"button",style:{margin:"5px"},onClick:R},"취소"),e("button",{type:"button",style:{margin:"5px"},onClick:H},"완료")])])):f("",!0),h.value?f("",!0):(o(),n("button",{key:2,type:"button",onClick:s[5]||(s[5]=l=>h.value=!0)},"변경"))]),e("div",Ze,[He,e("span",Re,v((U=c.value)==null?void 0:U.name),1)]),e("div",Te,[qe,C.value?(o(),n("span",Je,[e("div",Ke,[Le,y(e("input",{type:"text","onUpdate:modelValue":s[6]||(s[6]=l=>_.value=l),placeholder:"닉네임 입력(최대 15자)",maxlength:"15"},null,512),[[b,_.value]])]),e("div",{style:{"text-align":"center"}},[e("button",{type:"button",style:{margin:"5px"},onClick:T},"취소"),e("button",{type:"button",style:{margin:"5px"},onClick:q},"완료")])])):(o(),n("span",Ge,v((N=c.value)==null?void 0:N.nickname),1)),C.value?f("",!0):(o(),n("button",{key:2,type:"button",onClick:s[7]||(s[7]=l=>C.value=!0)},"변경"))]),e("div",Oe,[Qe,j.value?(o(),n("span",Xe,[e("div",Ye,[y(e("input",{type:"email","onUpdate:modelValue":s[8]||(s[8]=l=>r.value=l),placeholder:"이메일을 입력해주세요"},null,512),[[b,r.value]])]),e("div",{style:{"text-align":"center"}},[e("button",{type:"button",style:{margin:"5px"},onClick:G},"취소"),e("button",{type:"button",style:{margin:"5px"},onClick:J},"완료")])])):(o(),n("span",We,v((E=c.value)==null?void 0:E.email),1)),j.value?f("",!0):(o(),n("button",{key:2,type:"button",onClick:s[9]||(s[9]=l=>j.value=!0)},"변경"))]),e("div",es,[ss,P.value?(o(),n("span",as,[e("div",ls,[y(e("input",{type:"email","onUpdate:modelValue":s[10]||(s[10]=l=>p.value=l),maxlength:"13",placeholder:"휴대폰 번호를 입력해주세요"},null,512),[[b,p.value]])]),e("div",{style:{"text-align":"center"}},[e("button",{type:"button",style:{margin:"5px"},onClick:K},"취소"),e("button",{type:"button",style:{margin:"5px"},onClick:L},"완료")])])):(o(),n("span",ts,v((F=c.value)==null?void 0:F.phone),1)),P.value?f("",!0):(o(),n("button",{key:2,type:"button",onClick:s[11]||(s[11]=l=>P.value=!0)},"변경"))]),e("div",os,[ns,e("span",is,v((z=c.value)==null?void 0:z.reserves)+"원",1)])])])])],64)}}});const ps=ye(cs,[["__scopeId","data-v-70393cce"]]);export{ps as default};
