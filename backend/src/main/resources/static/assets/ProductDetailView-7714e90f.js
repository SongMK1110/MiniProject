import{u as tt,r as C,a as b,i as et,j as at,k as ot,l as lt,m as st,n as nt,q as it,s as dt,x as ut,y as ct,z as rt,A as _t,B as vt,C as Ct,D as gt,E as ht,e as mt,_ as pt,o as u,c,b as t,F as x,d as S,t as i,G as g,w as r,v as z,g as _,H as h,f as m,p as yt,h as ft}from"./index-230e3c20.js";function bt(v){return new URL(Object.assign({"/src/assets/images/강아지이미지.jpg":et,"/src/assets/images/검정 후드티.jpg":at,"/src/assets/images/검정 후드티2.jpg":ot,"/src/assets/images/검정 후드티3.jpg":lt,"/src/assets/images/고양이 이미지.png":st,"/src/assets/images/나이키 바지.jpg":nt,"/src/assets/images/마이페이지.png":it,"/src/assets/images/슬랙스.jpg":dt,"/src/assets/images/야구 잠바.jpg":ut,"/src/assets/images/양털 후리스.jpg":ct,"/src/assets/images/청바지.jpg":rt,"/src/assets/images/체크셔츠.jpg":_t,"/src/assets/images/파란색 후드티.jpg":vt,"/src/assets/images/패딩 조끼.jpg":Ct,"/src/assets/images/회색 후드티.jpg":gt,"/src/assets/images/회색 후드티2.jpg":ht})[`/src/assets/images/${v}`],self.location).href}function F(v){if(v!==null){var n=v.split(".")[1],w=n.replace(/-/g,"+").replace(/_/g,"/"),e=decodeURIComponent(atob(w).split("").map(function(R){return"%"+("00"+R.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)}}const At={setup(){const v=tt(),n=C(),w=C([]),e=localStorage.getItem("token"),R=F(e);let B="";R!==void 0&&(B=F(e).userName);const a=C(1),D=C(""),s=C(!1),p=C(0),A=C(""),k=C([]),j=C([]),P=o=>o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),K=()=>{a.value++,L()},W=()=>{a.value>1&&(a.value--,L())},L=()=>{n.value!==void 0&&(D.value=P(n.value.price*a.value))},X=async()=>{if(window.confirm("장바구니에 상품을 넣으시겠습니까?"))try{if((await b.post("api/cartCheck",{productId:v.query.id})).data==="duplication"){alert("장바구니에 있습니다.");return}(await b.post("api/insertCart",{productId:v.query.id,cnt:a.value})).data==="success"&&mt.push({name:"CartView",query:{userId:B}})}catch(d){console.error(d)}},Y=()=>{s.value=!s.value,s.value===!1?b.post("/api/deleteLike",{productId:v.query.id}).then(o=>{console.log(o)}).catch(o=>{console.log(o)}):b.post("/api/insertLike",{productId:v.query.id}).then(o=>{console.log(o)}).catch(o=>{console.log(o)})};b.post("/api/productDetail",{productId:v.query.id}).then(o=>{o!==void 0&&(n.value=o.data.productDetail,w.value=o.data.productDetailImg),o.data.likeCheck>0?s.value=!0:s.value=!1}).catch(o=>{console.log(o)});const T=C({1:0,2:0,3:0}),M=C({1:0,2:0,3:0}),Q=C({1:0,2:0,3:0}),N=C({1:0,2:0,3:0}),J=C({1:0,2:0}),O=C({1:0,2:0});b.get("api/reviewProductDetail",{params:{productId:v.query.id}}).then(o=>{j.value=o.data;const d=[],f=[],y=[],U=[],E=[],H=[];o.data.forEach(V=>{d.push(V.size),f.push(V.brightness),y.push(V.color),U.push(V.thickness),E.push(V.delivery),H.push(V.packaging)}),T.value=I(d),M.value=I(f),Q.value=I(y),N.value=I(U),J.value=G(E),O.value=G(H)}).catch(o=>{console.log(o)});function I(o){const d={1:0,2:0,3:0};return o.forEach(f=>{d[f.toString()]++}),{1:Math.floor(d[1]/o.length*100),2:Math.floor(d[2]/o.length*100),3:Math.floor(d[3]/o.length*100)}}function G(o){const d={1:0,2:0};return o.forEach(f=>{d[f.toString()]++}),{1:Math.floor(d[1]/o.length*100),2:Math.floor(d[2]/o.length*100)}}b.get("api/reviewRateAvg",{params:{productId:v.query.id}}).then(o=>{p.value=o.data,o.data<.5||o.data<1?p.value=.5:o.data<1.5?p.value=1:o.data<2?p.value=1.5:o.data<2.5?p.value=2:o.data<3?p.value=2.5:o.data<3.5?p.value=3:o.data<4?p.value=3.5:o.data<4.5?p.value=4:o.data<5?p.value=4.5:p.value=5}).catch(o=>{console.log(o)});const Z=o=>{const d=j.value.find(y=>y.reviewId===o);window.confirm("등록하시겠습니까?")&&b.post("api/insertReviewComment",{reviewId:o,content:d==null?void 0:d.reviewComment}).then(y=>{k.value.push(y.data),d&&d.reviewComment!==void 0&&(d.reviewComment="")}).catch(y=>{console.log(y)})};b.get("api/selectReviewComment").then(o=>{k.value=o.data}).catch(o=>{console.log(o)});const $=o=>{window.confirm("삭제하시겠습니까?")&&b.post("api/deleteComment",{commentId:o,memberId:B}).then(f=>{f.data==="success"&&(k.value=k.value.filter(y=>y.commentId!==o))}).catch(f=>{console.log(f)})},q=C();return{product:n,imgList:w,getImageUrl:bt,token:e,parseJwt:F,userId:B,addToCart:X,quantity:a,totalPrice:D,incrementQuantity:K,decrementQuantity:W,calculateTotalPrice:L,parseToken:R,likeBtn:Y,liked:s,addCommas:P,reviewList:j,averageRate:p,insertComment:Z,reviewComment:A,reviewCommentList:k,deleteComment:$,updateComment:(o,d)=>{q.value=o,A.value=d},editingCommentId:q,saveEditedComment:o=>{const d=A.value;window.confirm("수정하시겠습니까?")&&b.post("api/updateComment",{commentId:o,content:d,memberId:B}).then(y=>{if(y.data==="success"){q.value=-1;const U=k.value.findIndex(E=>E.commentId===o);U!==-1&&(k.value[U].content=d)}}).catch(y=>{console.log(y)})},sizeAvg:T,brightAvg:M,colorAvg:Q,thickAvg:N,deliveryAvg:J,packAvg:O}}};const l=v=>(yt("data-v-5a5df0c1"),v=v(),ft(),v),kt={class:"centered-content"},Bt=l(()=>t("h1",null,"상품 디테일 페이지",-1)),Dt={class:"image-list"},Vt=["src"],wt=l(()=>t("br",null,null,-1)),Rt={key:0},Ut={key:1},It={key:2},Et=l(()=>t("label",{for:"quantity"},"수량:",-1)),jt={key:0},Lt={key:1},qt={class:"average-rating"},xt=l(()=>t("h3",null,"전체 평균 별점",-1)),St={class:"rate"},zt=l(()=>t("label",{title:"5점"},null,-1)),Ft=l(()=>t("label",{class:"half",title:"4.5점"},null,-1)),Pt=l(()=>t("label",{title:"4점"},null,-1)),Tt=l(()=>t("label",{class:"half",title:"3.5점"},null,-1)),Mt=l(()=>t("label",{title:"3점"},null,-1)),Qt=l(()=>t("label",{class:"half",title:"2.5점"},null,-1)),Nt=l(()=>t("label",{title:"2점"},null,-1)),Jt=l(()=>t("label",{class:"half",title:"1.5점"},null,-1)),Ot=l(()=>t("label",{title:"1점"},null,-1)),Gt=l(()=>t("label",{class:"half",title:"0.5점"},null,-1)),Ht={class:"statistics"},Kt=l(()=>t("h3",null,"사이즈 통계",-1)),Wt={class:"rating"},Xt={class:"rating-option"},Yt=l(()=>t("span",null,"커요",-1)),Zt={class:"bar"},$t={class:"rating-option"},te=l(()=>t("span",null,"보통이에요",-1)),ee={class:"bar"},ae={class:"rating-option"},oe=l(()=>t("span",null,"작아요",-1)),le={class:"bar"},se=l(()=>t("h3",null,"밝기 통계",-1)),ne={class:"rating"},ie={class:"rating-option"},de=l(()=>t("span",null,"밝아요",-1)),ue={class:"bar"},ce={class:"rating-option"},re=l(()=>t("span",null,"보통이에요",-1)),_e={class:"bar"},ve={class:"rating-option"},Ce=l(()=>t("span",null,"어두워요",-1)),ge={class:"bar"},he=l(()=>t("h3",null,"색감 통계",-1)),me={class:"rating"},pe={class:"rating-option"},ye=l(()=>t("span",null,"선명해요",-1)),fe={class:"bar"},be={class:"rating-option"},Ae=l(()=>t("span",null,"보통이에요",-1)),ke={class:"bar"},Be={class:"rating-option"},De=l(()=>t("span",null,"흐려요",-1)),Ve={class:"bar"},we=l(()=>t("h3",null,"두께감 통계",-1)),Re={class:"rating"},Ue={class:"rating-option"},Ie=l(()=>t("span",null,"두꺼워요",-1)),Ee={class:"bar"},je={class:"rating-option"},Le=l(()=>t("span",null,"보통이에요",-1)),qe={class:"bar"},xe={class:"rating-option"},Se=l(()=>t("span",null,"얇아요",-1)),ze={class:"bar"},Fe=l(()=>t("h3",null,"배송 통계",-1)),Pe={class:"rating"},Te={class:"rating-option"},Me=l(()=>t("span",null,"빨라요",-1)),Qe={class:"bar"},Ne={class:"rating-option"},Je=l(()=>t("span",null,"아쉬워요",-1)),Oe={class:"bar"},Ge=l(()=>t("h3",null,"포장 통계",-1)),He={class:"rating"},Ke={class:"rating-option"},We=l(()=>t("span",null,"꼼꼼해요",-1)),Xe={class:"bar"},Ye={class:"rating-option"},Ze=l(()=>t("span",null,"아쉬워요",-1)),$e={class:"bar"},ta={class:"review-section"},ea=l(()=>t("h2",null,"상품 리뷰",-1)),aa={class:"review-list"},oa={class:"review-author"},la={class:"review-rating"},sa={class:"rate"},na=["onUpdate:modelValue"],ia=l(()=>t("label",{title:"5점"},null,-1)),da=["onUpdate:modelValue"],ua=l(()=>t("label",{class:"half",title:"4.5점"},null,-1)),ca=["onUpdate:modelValue"],ra=l(()=>t("label",{title:"4점"},null,-1)),_a=["onUpdate:modelValue"],va=l(()=>t("label",{class:"half",title:"3.5점"},null,-1)),Ca=["onUpdate:modelValue"],ga=l(()=>t("label",{title:"3점"},null,-1)),ha=["onUpdate:modelValue"],ma=l(()=>t("label",{class:"half",title:"2.5점"},null,-1)),pa=["onUpdate:modelValue"],ya=l(()=>t("label",{title:"2점"},null,-1)),fa=["onUpdate:modelValue"],ba=l(()=>t("label",{class:"half",title:"1.5점"},null,-1)),Aa=["onUpdate:modelValue"],ka=l(()=>t("label",{title:"1점"},null,-1)),Ba=["onUpdate:modelValue"],Da=l(()=>t("label",{class:"half",title:"0.5점"},null,-1)),Va={class:"review-content"},wa=l(()=>t("label",{for:""},"댓글: ",-1)),Ra=["onUpdate:modelValue"],Ua=["onClick"],Ia={key:0,class:"comment"},Ea={key:0},ja={class:"comment-author"},La={class:"comment-date"},qa=["onClick"],xa={key:1},Sa={class:"comment-author"},za={class:"comment-content"},Fa={class:"comment-date"},Pa={key:0},Ta=["onClick"],Ma=["onClick"];function Qa(v,n,w,e,R,B){return u(),c("div",kt,[Bt,t("div",null,[t("div",Dt,[(u(!0),c(x,null,S(e.imgList,(a,D)=>(u(),c("div",{key:D,class:"image-item"},[t("img",{src:e.getImageUrl(a.img),style:{width:"200px"}},null,8,Vt),wt]))),128))]),e.product?(u(),c("h2",Rt,"이름: "+i(e.product.name),1)):g("",!0),e.product?(u(),c("p",Ut,"가격: "+i(e.addCommas(e.product.price))+"원",1)):g("",!0),e.product?(u(),c("p",It,"설명: "+i(e.product.content),1)):g("",!0)]),t("div",null,[t("div",null,[Et,t("button",{onClick:n[0]||(n[0]=(...a)=>e.decrementQuantity&&e.decrementQuantity(...a))},"-"),r(t("input",{type:"number",id:"quantity","onUpdate:modelValue":n[1]||(n[1]=a=>e.quantity=a),readonly:""},null,512),[[z,e.quantity]]),t("button",{onClick:n[2]||(n[2]=(...a)=>e.incrementQuantity&&e.incrementQuantity(...a))},"+")]),e.totalPrice!=""?(u(),c("p",jt,"총 가격: "+i(e.totalPrice)+"원",1)):e.product?(u(),c("p",Lt,"총 가격: "+i(e.addCommas(e.product.price))+"원",1)):g("",!0)]),t("div",null,[t("button",{style:{"margin-right":"10px"},onClick:n[3]||(n[3]=(...a)=>e.likeBtn&&e.likeBtn(...a))},i(e.liked?"좋아요 취소":"좋아요"),1),t("button",{onClick:n[4]||(n[4]=(...a)=>e.addToCart&&e.addToCart(...a))},"장바구니")]),t("div",qt,[xt,t("fieldset",St,[e.averageRate>=5?r((u(),c("input",{key:0,type:"radio",value:"5","onUpdate:modelValue":n[5]||(n[5]=a=>e.averageRate=a),readonly:""},null,512)),[[_,e.averageRate]]):g("",!0),zt,e.averageRate>=4.5?r((u(),c("input",{key:1,type:"radio",value:"4.5","onUpdate:modelValue":n[6]||(n[6]=a=>e.averageRate=a),readonly:""},null,512)),[[_,e.averageRate]]):g("",!0),Ft,e.averageRate>=4?r((u(),c("input",{key:2,type:"radio",value:"4","onUpdate:modelValue":n[7]||(n[7]=a=>e.averageRate=a),readonly:""},null,512)),[[_,e.averageRate]]):g("",!0),Pt,e.averageRate>=3.5?r((u(),c("input",{key:3,type:"radio",value:"3.5","onUpdate:modelValue":n[8]||(n[8]=a=>e.averageRate=a),readonly:""},null,512)),[[_,e.averageRate]]):g("",!0),Tt,e.averageRate>=3?r((u(),c("input",{key:4,type:"radio",value:"3","onUpdate:modelValue":n[9]||(n[9]=a=>e.averageRate=a),readonly:""},null,512)),[[_,e.averageRate]]):g("",!0),Mt,e.averageRate>=2.5?r((u(),c("input",{key:5,type:"radio",value:"2.5","onUpdate:modelValue":n[10]||(n[10]=a=>e.averageRate=a),readonly:""},null,512)),[[_,e.averageRate]]):g("",!0),Qt,e.averageRate>=2?r((u(),c("input",{key:6,type:"radio",value:"2","onUpdate:modelValue":n[11]||(n[11]=a=>e.averageRate=a),readonly:""},null,512)),[[_,e.averageRate]]):g("",!0),Nt,e.averageRate>=1.5?r((u(),c("input",{key:7,type:"radio",value:"1.5","onUpdate:modelValue":n[12]||(n[12]=a=>e.averageRate=a),readonly:""},null,512)),[[_,e.averageRate]]):g("",!0),Jt,e.averageRate>=1?r((u(),c("input",{key:8,type:"radio",value:"1","onUpdate:modelValue":n[13]||(n[13]=a=>e.averageRate=a),readonly:""},null,512)),[[_,e.averageRate]]):g("",!0),Ot,e.averageRate>=.5?r((u(),c("input",{key:9,type:"radio",value:"0.5","onUpdate:modelValue":n[14]||(n[14]=a=>e.averageRate=a),readonly:""},null,512)),[[_,e.averageRate]]):g("",!0),Gt]),t("div",Ht,[Kt,t("div",Wt,[t("div",Xt,[Yt,t("div",Zt,[t("div",{class:"filled",style:h({width:e.sizeAvg[1]+"%"})},null,4)]),m(" "+i(e.sizeAvg[1])+"% ",1)]),t("div",$t,[te,t("div",ee,[t("div",{class:"filled",style:h({width:e.sizeAvg[2]+"%"})},null,4)]),m(" "+i(e.sizeAvg[2])+"% ",1)]),t("div",ae,[oe,t("div",le,[t("div",{class:"filled",style:h({width:e.sizeAvg[3]+"%"})},null,4)]),m(" "+i(e.sizeAvg[3])+"% ",1)])]),se,t("div",ne,[t("div",ie,[de,t("div",ue,[t("div",{class:"filled",style:h({width:e.brightAvg[1]+"%"})},null,4)]),m(" "+i(e.brightAvg[1])+"% ",1)]),t("div",ce,[re,t("div",_e,[t("div",{class:"filled",style:h({width:e.brightAvg[2]+"%"})},null,4)]),m(" "+i(e.brightAvg[2])+"% ",1)]),t("div",ve,[Ce,t("div",ge,[t("div",{class:"filled",style:h({width:e.brightAvg[3]+"%"})},null,4)]),m(" "+i(e.brightAvg[3])+"% ",1)])]),he,t("div",me,[t("div",pe,[ye,t("div",fe,[t("div",{class:"filled",style:h({width:e.colorAvg[1]+"%"})},null,4)]),m(" "+i(e.colorAvg[1])+"% ",1)]),t("div",be,[Ae,t("div",ke,[t("div",{class:"filled",style:h({width:e.colorAvg[2]+"%"})},null,4)]),m(" "+i(e.colorAvg[2])+"% ",1)]),t("div",Be,[De,t("div",Ve,[t("div",{class:"filled",style:h({width:e.colorAvg[3]+"%"})},null,4)]),m(" "+i(e.colorAvg[3])+"% ",1)])]),we,t("div",Re,[t("div",Ue,[Ie,t("div",Ee,[t("div",{class:"filled",style:h({width:e.thickAvg[1]+"%"})},null,4)]),m(" "+i(e.thickAvg[1])+"% ",1)]),t("div",je,[Le,t("div",qe,[t("div",{class:"filled",style:h({width:e.thickAvg[2]+"%"})},null,4)]),m(" "+i(e.thickAvg[2])+"% ",1)]),t("div",xe,[Se,t("div",ze,[t("div",{class:"filled",style:h({width:e.thickAvg[3]+"%"})},null,4)]),m(" "+i(e.thickAvg[3])+"% ",1)])]),Fe,t("div",Pe,[t("div",Te,[Me,t("div",Qe,[t("div",{class:"filled",style:h({width:e.deliveryAvg[1]+"%"})},null,4)]),m(" "+i(e.deliveryAvg[1])+"% ",1)]),t("div",Ne,[Je,t("div",Oe,[t("div",{class:"filled",style:h({width:e.deliveryAvg[2]+"%"})},null,4)]),m(" "+i(e.deliveryAvg[2])+"% ",1)])]),Ge,t("div",He,[t("div",Ke,[We,t("div",Xe,[t("div",{class:"filled",style:h({width:e.packAvg[1]+"%"})},null,4)]),m(" "+i(e.packAvg[1])+"% ",1)]),t("div",Ye,[Ze,t("div",$e,[t("div",{class:"filled",style:h({width:e.packAvg[2]+"%"})},null,4)]),m(" "+i(e.packAvg[2])+"% ",1)])])])]),t("div",ta,[ea,t("ul",aa,[(u(!0),c(x,null,S(e.reviewList,(a,D)=>(u(),c("li",{class:"review-item",key:D},[t("div",oa,"작성자: "+i(a.name),1),t("div",la,"평점: "+i(a.rate)+"/5",1),t("fieldset",sa,[r(t("input",{type:"radio",value:"5","onUpdate:modelValue":s=>a.rate=s,readonly:""},null,8,na),[[_,a.rate]]),ia,r(t("input",{type:"radio",value:"4.5","onUpdate:modelValue":s=>a.rate=s,readonly:""},null,8,da),[[_,a.rate]]),ua,r(t("input",{type:"radio",value:"4","onUpdate:modelValue":s=>a.rate=s,readonly:""},null,8,ca),[[_,a.rate]]),ra,r(t("input",{type:"radio",value:"3.5","onUpdate:modelValue":s=>a.rate=s,readonly:""},null,8,_a),[[_,a.rate]]),va,r(t("input",{type:"radio",value:"3","onUpdate:modelValue":s=>a.rate=s,readonly:""},null,8,Ca),[[_,a.rate]]),ga,r(t("input",{type:"radio",value:"2.5","onUpdate:modelValue":s=>a.rate=s,readonly:""},null,8,ha),[[_,a.rate]]),ma,r(t("input",{type:"radio",value:"2","onUpdate:modelValue":s=>a.rate=s,readonly:""},null,8,pa),[[_,a.rate]]),ya,r(t("input",{type:"radio",value:"1.5","onUpdate:modelValue":s=>a.rate=s,readonly:""},null,8,fa),[[_,a.rate]]),ba,r(t("input",{type:"radio",value:"1","onUpdate:modelValue":s=>a.rate=s,readonly:""},null,8,Aa),[[_,a.rate]]),ka,r(t("input",{type:"radio",value:"0.5","onUpdate:modelValue":s=>a.rate=s,readonly:""},null,8,Ba),[[_,a.rate]]),Da]),t("div",Va,i(a.content),1),wa,r(t("input",{type:"text","onUpdate:modelValue":s=>a.reviewComment=s},null,8,Ra),[[z,a.reviewComment]]),t("button",{type:"button",onClick:s=>e.insertComment(a.reviewId)},"등록",8,Ua),(u(!0),c(x,null,S(e.reviewCommentList,(s,p)=>(u(),c("div",{class:"comment-list",key:p},[s.reviewId===a.reviewId?(u(),c("div",Ia,[e.editingCommentId===s.commentId?(u(),c("div",Ea,[t("div",ja,"작성자: "+i(s.name),1),r(t("textarea",{"onUpdate:modelValue":n[15]||(n[15]=A=>e.reviewComment=A)},null,512),[[z,e.reviewComment]]),t("div",La,"작성일: "+i(s.rdate),1),t("button",{onClick:A=>e.saveEditedComment(s.commentId)},"저장",8,qa)])):(u(),c("div",xa,[t("div",Sa,"작성자: "+i(s.name),1),t("div",za,"내용: "+i(s.content),1),t("div",Fa,"작성일: "+i(s.rdate),1),s.memberId===parseInt(e.userId)?(u(),c("div",Pa,[t("button",{onClick:A=>e.updateComment(s.commentId,s.content)},"수정",8,Ta),t("button",{onClick:A=>e.deleteComment(s.commentId)},"삭제",8,Ma)])):g("",!0)]))])):g("",!0)]))),128))]))),128))])])])}const Ga=pt(At,[["render",Qa],["__scopeId","data-v-5a5df0c1"]]);export{Ga as default};
