import{_ as A,f,o as b,c as h,d as S,F as D,b as t,w as I,L as w,g as k,M as E,h as y,t as p,p as x,j as q,u as U,r,a as B,e as v,N as F,H as L,l as Q,m as P,q as N,s as H,x as M,y as z,z as O,A as R,B as T,C as G,D as J,E as K,G as X,I as W,J as Y,K as Z,v as $,k as tt}from"./index-ecfce85c.js";const et={props:["cartItems","quantityBtn","delCartBtn","getImageUrl","addCommas"]};const j=a=>(x("data-v-2d685602"),a=a(),q(),a),st=["onUpdate:modelValue"],nt={class:"item-info"},ot=["src"],lt=j(()=>t("br",null,null,-1)),at={class:"item-actions"},ut=["onClick"],it=["onClick"],ct=j(()=>t("td",null,[y(" 택배배송 "),t("br"),t("span",{style:{"font-weight":"bold"}},"배송비무료"),y(),t("br"),y(" 0원 이상 무료 ")],-1));function dt(a,e,d,s,_,m){const c=f("router-link");return b(!0),h(D,null,S(d.cartItems,(l,n)=>(b(),h("tr",{key:n,class:"cart-item"},[t("td",null,[I(t("input",{type:"checkbox","onUpdate:modelValue":C=>l.selected=C},null,8,st),[[w,l.selected]])]),t("td",nt,[k(c,{to:{name:"productDetailView",query:{id:l.productId}}},{default:E(()=>[t("span",null,[t("img",{src:d.getImageUrl(l.img),style:{width:"80px"}},null,8,ot)]),lt]),_:2},1032,["to"]),y(" "+p(l.name),1)]),t("td",null,p(d.addCommas(l.price))+"원",1),t("td",null,p(l.cnt)+"개",1),t("td",null,p(d.addCommas(l.cnt*l.price))+"원",1),t("td",at,[t("button",{type:"button",onClick:C=>d.quantityBtn(l.cnt,l.cartId),style:{"margin-right":"5px"}}," 수량 ",8,ut),t("button",{type:"button",onClick:C=>d.delCartBtn(l.productId,n)},"삭제",8,it)]),ct]))),128)}const rt=A(et,[["render",dt],["__scopeId","data-v-2d685602"]]);function _t(a){return new URL(Object.assign({"/src/assets/images/강아지이미지.jpg":Q,"/src/assets/images/검정 후드티.jpg":P,"/src/assets/images/검정 후드티2.jpg":N,"/src/assets/images/검정 후드티3.jpg":H,"/src/assets/images/고양이 이미지.png":M,"/src/assets/images/나이키 바지.jpg":z,"/src/assets/images/마이페이지.png":O,"/src/assets/images/슬랙스.jpg":R,"/src/assets/images/야구 잠바.jpg":T,"/src/assets/images/양털 후리스.jpg":G,"/src/assets/images/청바지.jpg":J,"/src/assets/images/체크셔츠.jpg":K,"/src/assets/images/파란색 후드티.jpg":X,"/src/assets/images/패딩 조끼.jpg":W,"/src/assets/images/회색 후드티.jpg":Y,"/src/assets/images/회색 후드티2.jpg":Z})[`/src/assets/images/${a}`],self.location).href}const Ct={setup(){const a=U(),e=r([]),d=r(0),s=r([]),_=r(!1),m=r(!1),c=r(1),l=r(0),n=o=>o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");B.get("/api/cartList").then(o=>{console.log(o),e.value=o.data}).catch(o=>{if(console.log(o),o.response.status===500){v.push("errorForm");return}});const C=(o,u)=>{window.confirm("삭제하시겠습니까?")&&(B.post("/api/deleteCart",{productId:o}).then(g=>{console.log(g)}).catch(g=>{if(console.log(g),g.response.data==="fail"){alert("장바구니 삭제 실패");return}if(g.response.status===500){v.push("errorForm");return}}),e.value.splice(u,1))},V=()=>{const o=e.value.filter(u=>u.selected).map(u=>u.productId);if(o.length===0){alert("선택된 상품이 없습니다.");return}v.push({name:"OrderView",query:{id:a.query.id,products:o.join(",")}})};return F(()=>{e.value.every(o=>o.selected)?_.value=!0:_.value=!1}),{cartItems:e,route:a,totalPrice:d,getImageUrl:_t,delCartBtn:C,selectedProducts:s,orderSelectedProducts:V,selectAll:_,toggleAllSelected:()=>{e.value.forEach(o=>{o.selected=!_.value})},addCommas:n,modal:m,quantity:c,incrementQuantity:()=>{c.value++},decrementQuantity:()=>{c.value>1&&c.value--},quantityBtn:(o,u)=>{l.value=u,m.value=!0,c.value=o},quantityChange:()=>{window.confirm("변경하시겠습니까?")&&B.post("api/updateCart",{cartId:l.value,cnt:c.value}).then(u=>{u.data==="success"&&location.reload()}).catch(u=>{if(console.log(u),u.response.data==="fail"){alert("장바구니 수정 실패");return}else if(u.response.data==="Exceeded cnt"){alert("1000 이하 수량을 넣어주세요");return}if(u.response.status===500){v.push("errorForm");return}})},cartId:l}},components:{CartList:rt,HeaderView:L}};const i=a=>(x("data-v-2497dbc3"),a=a(),q(),a),gt={key:0,class:"black-bg"},mt={class:"white-bg"},pt=i(()=>t("h2",null,"수량을 변경 해주세요",-1)),vt=i(()=>t("label",{for:"quantity"},"수량:",-1)),yt=i(()=>t("hr",null,null,-1)),bt=i(()=>t("h1",null,"장바구니",-1)),ht=i(()=>t("th",null,"상품명",-1)),Bt=i(()=>t("th",null,"판매",-1)),ft=i(()=>t("th",null,"수량",-1)),It=i(()=>t("th",null,"주문금액",-1)),kt=i(()=>t("th",null,"주문관리",-1)),At=i(()=>t("th",null,"배송비/배송 형태",-1)),Dt=i(()=>t("br",null,null,-1)),wt={style:{"text-align":"center"}};function xt(a,e,d,s,_,m){const c=f("HeaderView"),l=f("CartList");return b(),h(D,null,[t("header",null,[k(c)]),t("div",null,[s.modal===!0?(b(),h("div",gt,[t("div",mt,[t("button",{type:"button",onClick:e[0]||(e[0]=n=>s.modal=!1),style:{float:"right"}},"X"),pt,t("div",null,[vt,t("button",{onClick:e[1]||(e[1]=(...n)=>s.decrementQuantity&&s.decrementQuantity(...n))},"-"),I(t("input",{type:"number",id:"quantity","onUpdate:modelValue":e[2]||(e[2]=n=>s.quantity=n)},null,512),[[$,s.quantity]]),t("button",{onClick:e[3]||(e[3]=(...n)=>s.incrementQuantity&&s.incrementQuantity(...n))},"+")]),yt,t("button",{type:"button",onClick:e[4]||(e[4]=n=>s.modal=!1),style:{"margin-right":"10px"}},"취소"),t("button",{type:"button",onClick:e[5]||(e[5]=(...n)=>s.quantityChange&&s.quantityChange(...n))},"변경")])])):tt("",!0),bt,t("table",null,[t("thead",null,[t("tr",null,[t("th",null,[I(t("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=n=>s.selectAll=n),onClick:e[7]||(e[7]=(...n)=>s.toggleAllSelected&&s.toggleAllSelected(...n))},null,512),[[w,s.selectAll]])]),ht,Bt,ft,It,kt,At])]),t("tbody",null,[k(l,{cartItems:s.cartItems,quantityBtn:s.quantityBtn,delCartBtn:s.delCartBtn,getImageUrl:s.getImageUrl,addCommas:s.addCommas},null,8,["cartItems","quantityBtn","delCartBtn","getImageUrl","addCommas"])])]),Dt,t("div",wt,[t("button",{onClick:e[8]||(e[8]=(...n)=>s.orderSelectedProducts&&s.orderSelectedProducts(...n)),type:"button",style:{cursor:"pointer","font-size":"20px",padding:"10px 20px",color:"white","background-color":"black"}}," 주문하기 ")])])],64)}const Lt=A(Ct,[["render",xt],["__scopeId","data-v-2497dbc3"]]);export{Lt as default};
