import{_ as k,f,o as y,c as b,d as V,F as A,b as t,w as h,L as D,g as I,M as S,h as v,t as p,p as w,j as x,u as E,r,a as B,N as U,H as L,l as Q,m as F,q as P,s as N,x as H,y as M,z,A as O,B as R,C as T,D as G,E as J,G as K,I as X,J as W,K as Y,e as Z,v as $,k as tt}from"./index-ae286a28.js";const et={props:["cartItems","quantityBtn","delCartBtn","getImageUrl","addCommas"]};const q=a=>(w("data-v-2d685602"),a=a(),x(),a),st=["onUpdate:modelValue"],nt={class:"item-info"},ot=["src"],lt=q(()=>t("br",null,null,-1)),at={class:"item-actions"},ut=["onClick"],it=["onClick"],dt=q(()=>t("td",null,[v(" 택배배송 "),t("br"),t("span",{style:{"font-weight":"bold"}},"배송비무료"),v(),t("br"),v(" 0원 이상 무료 ")],-1));function ct(a,e,c,s,_,m){const d=f("router-link");return y(!0),b(A,null,V(c.cartItems,(l,n)=>(y(),b("tr",{key:n,class:"cart-item"},[t("td",null,[h(t("input",{type:"checkbox","onUpdate:modelValue":C=>l.selected=C},null,8,st),[[D,l.selected]])]),t("td",nt,[I(d,{to:{name:"productDetailView",query:{id:l.productId}}},{default:S(()=>[t("span",null,[t("img",{src:c.getImageUrl(l.img),style:{width:"80px"}},null,8,ot)]),lt]),_:2},1032,["to"]),v(" "+p(l.name),1)]),t("td",null,p(c.addCommas(l.price))+"원",1),t("td",null,p(l.cnt)+"개",1),t("td",null,p(c.addCommas(l.cnt*l.price))+"원",1),t("td",at,[t("button",{type:"button",onClick:C=>c.quantityBtn(l.cnt,l.cartId),style:{"margin-right":"5px"}}," 수량 ",8,ut),t("button",{type:"button",onClick:C=>c.delCartBtn(l.productId,n)},"삭제",8,it)]),dt]))),128)}const rt=k(et,[["render",ct],["__scopeId","data-v-2d685602"]]);function _t(a){return new URL(Object.assign({"/src/assets/images/강아지이미지.jpg":Q,"/src/assets/images/검정 후드티.jpg":F,"/src/assets/images/검정 후드티2.jpg":P,"/src/assets/images/검정 후드티3.jpg":N,"/src/assets/images/고양이 이미지.png":H,"/src/assets/images/나이키 바지.jpg":M,"/src/assets/images/마이페이지.png":z,"/src/assets/images/슬랙스.jpg":O,"/src/assets/images/야구 잠바.jpg":R,"/src/assets/images/양털 후리스.jpg":T,"/src/assets/images/청바지.jpg":G,"/src/assets/images/체크셔츠.jpg":J,"/src/assets/images/파란색 후드티.jpg":K,"/src/assets/images/패딩 조끼.jpg":X,"/src/assets/images/회색 후드티.jpg":W,"/src/assets/images/회색 후드티2.jpg":Y})[`/src/assets/images/${a}`],self.location).href}const Ct={setup(){const a=E(),e=r([]),c=r(0),s=r([]),_=r(!1),m=r(!1),d=r(1),l=r(0),n=o=>o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");B.get("/api/cartList").then(o=>{console.log(o),e.value=o.data}).catch(o=>{if(console.log(o),o.response.status===500){alert("서버 오류 발생");return}});const C=(o,u)=>{window.confirm("삭제하시겠습니까?")&&(B.post("/api/deleteCart",{productId:o}).then(g=>{console.log(g)}).catch(g=>{if(console.log(g),g.response.data==="fail"){alert("장바구니 삭제 실패");return}if(g.response.status===500){alert("서버 오류 발생");return}}),e.value.splice(u,1))},j=()=>{const o=e.value.filter(u=>u.selected).map(u=>u.productId);if(o.length===0){alert("선택된 상품이 없습니다.");return}Z.push({name:"OrderView",query:{id:a.query.id,products:o.join(",")}})};return U(()=>{e.value.every(o=>o.selected)?_.value=!0:_.value=!1}),{cartItems:e,route:a,totalPrice:c,getImageUrl:_t,delCartBtn:C,selectedProducts:s,orderSelectedProducts:j,selectAll:_,toggleAllSelected:()=>{e.value.forEach(o=>{o.selected=!_.value})},addCommas:n,modal:m,quantity:d,incrementQuantity:()=>{d.value++},decrementQuantity:()=>{d.value>1&&d.value--},quantityBtn:(o,u)=>{l.value=u,m.value=!0,d.value=o},quantityChange:()=>{window.confirm("변경하시겠습니까?")&&B.post("api/updateCart",{cartId:l.value,cnt:d.value}).then(u=>{u.data==="success"&&location.reload()}).catch(u=>{if(console.log(u),u.response.data==="fail"){alert("장바구니 수정 실패");return}else if(u.response.data==="Exceeded cnt"){alert("1000 이하 수량을 넣어주세요");return}if(u.response.status===500){alert("서버 오류 발생");return}})},cartId:l}},components:{CartList:rt,HeaderView:L}};const i=a=>(w("data-v-8d64db50"),a=a(),x(),a),gt={key:0,class:"black-bg"},mt={class:"white-bg"},pt=i(()=>t("h2",null,"수량을 변경 해주세요",-1)),vt=i(()=>t("label",{for:"quantity"},"수량:",-1)),yt=i(()=>t("hr",null,null,-1)),bt=i(()=>t("h1",null,"장바구니",-1)),Bt=i(()=>t("th",null,"상품명",-1)),ft=i(()=>t("th",null,"판매",-1)),ht=i(()=>t("th",null,"수량",-1)),It=i(()=>t("th",null,"주문금액",-1)),kt=i(()=>t("th",null,"주문관리",-1)),At=i(()=>t("th",null,"배송비/배송 형태",-1)),Dt=i(()=>t("br",null,null,-1)),wt={style:{"text-align":"center"}};function xt(a,e,c,s,_,m){const d=f("HeaderView"),l=f("CartList");return y(),b(A,null,[t("header",null,[I(d)]),t("div",null,[s.modal===!0?(y(),b("div",gt,[t("div",mt,[t("button",{type:"button",onClick:e[0]||(e[0]=n=>s.modal=!1),style:{float:"right"}},"X"),pt,t("div",null,[vt,t("button",{onClick:e[1]||(e[1]=(...n)=>s.decrementQuantity&&s.decrementQuantity(...n))},"-"),h(t("input",{type:"number",id:"quantity","onUpdate:modelValue":e[2]||(e[2]=n=>s.quantity=n)},null,512),[[$,s.quantity]]),t("button",{onClick:e[3]||(e[3]=(...n)=>s.incrementQuantity&&s.incrementQuantity(...n))},"+")]),yt,t("button",{type:"button",onClick:e[4]||(e[4]=n=>s.modal=!1),style:{"margin-right":"10px"}},"취소"),t("button",{type:"button",onClick:e[5]||(e[5]=(...n)=>s.quantityChange&&s.quantityChange(...n))},"변경")])])):tt("",!0),bt,t("table",null,[t("thead",null,[t("tr",null,[t("th",null,[h(t("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=n=>s.selectAll=n),onClick:e[7]||(e[7]=(...n)=>s.toggleAllSelected&&s.toggleAllSelected(...n))},null,512),[[D,s.selectAll]])]),Bt,ft,ht,It,kt,At])]),t("tbody",null,[I(l,{cartItems:s.cartItems,quantityBtn:s.quantityBtn,delCartBtn:s.delCartBtn,getImageUrl:s.getImageUrl,addCommas:s.addCommas},null,8,["cartItems","quantityBtn","delCartBtn","getImageUrl","addCommas"])])]),Dt,t("div",wt,[t("button",{onClick:e[8]||(e[8]=(...n)=>s.orderSelectedProducts&&s.orderSelectedProducts(...n)),type:"button",style:{cursor:"pointer","font-size":"20px",padding:"10px 20px",color:"white","background-color":"black"}}," 주문하기 ")])])],64)}const Qt=k(Ct,[["render",xt],["__scopeId","data-v-8d64db50"]]);export{Qt as default};
