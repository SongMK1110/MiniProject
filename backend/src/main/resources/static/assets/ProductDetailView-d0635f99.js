import{u as J,r as y,a as p,i as M,j as O,k as z,l as G,m as H,n as K,q as W,s as X,x as Y,y as Z,z as $,A as ee,B as te,C as ae,e as oe,_ as le,o as i,c as s,b as a,F as A,d as w,t as C,D as m,w as u,v as j,g as r,p as ne,h as ie}from"./index-d96fb694.js";function se(c){return new URL(Object.assign({"/src/assets/images/검정 후드티.jpg":M,"/src/assets/images/검정 후드티2.jpg":O,"/src/assets/images/검정 후드티3.jpg":z,"/src/assets/images/고양이 이미지.png":G,"/src/assets/images/나이키 바지.jpg":H,"/src/assets/images/마이페이지.png":K,"/src/assets/images/슬랙스.jpg":W,"/src/assets/images/야구 잠바.jpg":X,"/src/assets/images/양털 후리스.jpg":Y,"/src/assets/images/청바지.jpg":Z,"/src/assets/images/체크셔츠.jpg":$,"/src/assets/images/패딩 조끼.jpg":ee,"/src/assets/images/회색 후드티.jpg":te,"/src/assets/images/회색 후드티2.jpg":ae})[`/src/assets/images/${c}`],self.location).href}function q(c){if(c!==null){var n=c.split(".")[1],R=n.replace(/-/g,"+").replace(/_/g,"/"),e=decodeURIComponent(atob(R).split("").map(function(U){return"%"+("00"+U.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)}}const de={setup(){const c=J(),n=y(),R=y([]),e=localStorage.getItem("token"),U=q(e);let k="";U!==void 0&&(k=q(e).userName);const t=y(1),V=y(""),l=y(!1),v=y(0),h=y(""),b=y([]),I=y([]),x=o=>o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),S=()=>{t.value++,D()},E=()=>{t.value>1&&(t.value--,D())},D=()=>{n.value!==void 0&&(V.value=x(n.value.price*t.value))},P=async()=>{if(window.confirm("장바구니에 상품을 넣으시겠습니까?"))try{const _=await p.post("api/cartCheck",{productId:c.query.id});if(console.log(_),_.data==="duplication"){alert("장바구니에 있습니다.");return}const f=await p.post("api/insertCart",{productId:c.query.id,cnt:t.value});console.log(f),f.data==="success"&&oe.push({name:"CartView",query:{userId:k}})}catch(_){console.error(_)}},Q=()=>{l.value=!l.value,l.value===!1?p.post("/api/deleteLike",{productId:c.query.id}).then(o=>{console.log(o)}).catch(o=>{console.log(o)}):p.post("/api/insertLike",{productId:c.query.id}).then(o=>{console.log(o)}).catch(o=>{console.log(o)})};p.post("/api/productDetail",{productId:c.query.id}).then(o=>{o!==void 0&&(n.value=o.data.productDetail,R.value=o.data.productDetailImg),o.data.likeCheck>0?l.value=!0:l.value=!1}).catch(o=>{console.log(o)}),p.get("api/reviewProductDetail",{params:{productId:c.query.id}}).then(o=>{I.value=o.data}).catch(o=>{console.log(o)}),p.get("api/reviewRateAvg",{params:{productId:c.query.id}}).then(o=>{v.value=o.data,o.data<.5||o.data<1?v.value=.5:o.data<1.5?v.value=1:o.data<2?v.value=1.5:o.data<2.5?v.value=2:o.data<3?v.value=2.5:o.data<3.5?v.value=3:o.data<4?v.value=3.5:o.data<4.5?v.value=4:o.data<5?v.value=4.5:v.value=5}).catch(o=>{console.log(o)});const T=o=>{const _=I.value.find(g=>g.reviewId===o);window.confirm("등록하시겠습니까?")&&p.post("api/insertReviewComment",{reviewId:o,content:_==null?void 0:_.reviewComment}).then(g=>{b.value.push(g.data),_&&_.reviewComment!==void 0&&(_.reviewComment="")}).catch(g=>{console.log(g)})};p.get("api/selectReviewComment").then(o=>{b.value=o.data}).catch(o=>{console.log(o)});const F=o=>{window.confirm("삭제하시겠습니까?")&&p.post("api/deleteComment",{commentId:o,memberId:k}).then(f=>{f.data==="success"&&(b.value=b.value.filter(g=>g.commentId!==o))}).catch(f=>{console.log(f)})},B=y();return{product:n,imgList:R,getImageUrl:se,token:e,parseJwt:q,userId:k,addToCart:P,quantity:t,totalPrice:V,incrementQuantity:S,decrementQuantity:E,calculateTotalPrice:D,parseToken:U,likeBtn:Q,liked:l,addCommas:x,reviewList:I,averageRate:v,insertComment:T,reviewComment:h,reviewCommentList:b,deleteComment:F,updateComment:(o,_)=>{B.value=o,h.value=_},editingCommentId:B,saveEditedComment:o=>{const _=h.value;window.confirm("수정하시겠습니까?")&&p.post("api/updateComment",{commentId:o,content:_,memberId:k}).then(g=>{if(g.data==="success"){B.value=-1;const L=b.value.findIndex(N=>N.commentId===o);L!==-1&&(b.value[L].content=_)}}).catch(g=>{console.log(g)})}}}};const d=c=>(ne("data-v-76315596"),c=c(),ie(),c),ue={class:"centered-content"},re=d(()=>a("h1",null,"상품 디테일 페이지",-1)),ce={class:"image-list"},_e=["src"],me=d(()=>a("br",null,null,-1)),ve={key:0},Ce={key:1},ge={key:2},pe=d(()=>a("label",{for:"quantity"},"수량:",-1)),ye={key:0},he={key:1},fe={class:"average-rating"},be=d(()=>a("h3",null,"전체 평균 별점",-1)),ke={class:"rate"},Ve=d(()=>a("label",{title:"5점"},null,-1)),Re=d(()=>a("label",{class:"half",title:"4.5점"},null,-1)),Ue=d(()=>a("label",{title:"4점"},null,-1)),Ie=d(()=>a("label",{class:"half",title:"3.5점"},null,-1)),De=d(()=>a("label",{title:"3점"},null,-1)),Be=d(()=>a("label",{class:"half",title:"2.5점"},null,-1)),Ae=d(()=>a("label",{title:"2점"},null,-1)),we=d(()=>a("label",{class:"half",title:"1.5점"},null,-1)),je=d(()=>a("label",{title:"1점"},null,-1)),qe=d(()=>a("label",{class:"half",title:"0.5점"},null,-1)),xe={class:"review-section"},Le=d(()=>a("h2",null,"상품 리뷰",-1)),Se={class:"review-list"},Ee={class:"review-author"},Pe={class:"review-rating"},Qe={class:"rate"},Te=["onUpdate:modelValue"],Fe=d(()=>a("label",{title:"5점"},null,-1)),Ne=["onUpdate:modelValue"],Je=d(()=>a("label",{class:"half",title:"4.5점"},null,-1)),Me=["onUpdate:modelValue"],Oe=d(()=>a("label",{title:"4점"},null,-1)),ze=["onUpdate:modelValue"],Ge=d(()=>a("label",{class:"half",title:"3.5점"},null,-1)),He=["onUpdate:modelValue"],Ke=d(()=>a("label",{title:"3점"},null,-1)),We=["onUpdate:modelValue"],Xe=d(()=>a("label",{class:"half",title:"2.5점"},null,-1)),Ye=["onUpdate:modelValue"],Ze=d(()=>a("label",{title:"2점"},null,-1)),$e=["onUpdate:modelValue"],et=d(()=>a("label",{class:"half",title:"1.5점"},null,-1)),tt=["onUpdate:modelValue"],at=d(()=>a("label",{title:"1점"},null,-1)),ot=["onUpdate:modelValue"],lt=d(()=>a("label",{class:"half",title:"0.5점"},null,-1)),nt={class:"review-content"},it=d(()=>a("label",{for:""},"댓글: ",-1)),st=["onUpdate:modelValue"],dt=["onClick"],ut={key:0,class:"comment"},rt={key:0},ct={class:"comment-author"},_t={class:"comment-date"},mt=["onClick"],vt={key:1},Ct={class:"comment-author"},gt={class:"comment-content"},pt={class:"comment-date"},yt={key:0},ht=["onClick"],ft=["onClick"];function bt(c,n,R,e,U,k){return i(),s("div",ue,[re,a("div",null,[a("div",ce,[(i(!0),s(A,null,w(e.imgList,(t,V)=>(i(),s("div",{key:V,class:"image-item"},[a("img",{src:e.getImageUrl(t.img),style:{width:"200px"}},null,8,_e),me]))),128))]),e.product?(i(),s("h2",ve,"이름: "+C(e.product.name),1)):m("",!0),e.product?(i(),s("p",Ce,"가격: "+C(e.addCommas(e.product.price))+"원",1)):m("",!0),e.product?(i(),s("p",ge,"설명: "+C(e.product.content),1)):m("",!0)]),a("div",null,[a("div",null,[pe,a("button",{onClick:n[0]||(n[0]=(...t)=>e.decrementQuantity&&e.decrementQuantity(...t))},"-"),u(a("input",{type:"number",id:"quantity","onUpdate:modelValue":n[1]||(n[1]=t=>e.quantity=t),readonly:""},null,512),[[j,e.quantity]]),a("button",{onClick:n[2]||(n[2]=(...t)=>e.incrementQuantity&&e.incrementQuantity(...t))},"+")]),e.totalPrice!=""?(i(),s("p",ye,"총 가격: "+C(e.totalPrice)+"원",1)):e.product?(i(),s("p",he,"총 가격: "+C(e.addCommas(e.product.price))+"원",1)):m("",!0)]),a("div",null,[a("button",{style:{"margin-right":"10px"},onClick:n[3]||(n[3]=(...t)=>e.likeBtn&&e.likeBtn(...t))},C(e.liked?"좋아요 취소":"좋아요"),1),a("button",{onClick:n[4]||(n[4]=(...t)=>e.addToCart&&e.addToCart(...t))},"장바구니")]),a("div",fe,[be,a("fieldset",ke,[e.averageRate>=5?u((i(),s("input",{key:0,type:"radio",value:"5","onUpdate:modelValue":n[5]||(n[5]=t=>e.averageRate=t),readonly:""},null,512)),[[r,e.averageRate]]):m("",!0),Ve,e.averageRate>=4.5?u((i(),s("input",{key:1,type:"radio",value:"4.5","onUpdate:modelValue":n[6]||(n[6]=t=>e.averageRate=t),readonly:""},null,512)),[[r,e.averageRate]]):m("",!0),Re,e.averageRate>=4?u((i(),s("input",{key:2,type:"radio",value:"4","onUpdate:modelValue":n[7]||(n[7]=t=>e.averageRate=t),readonly:""},null,512)),[[r,e.averageRate]]):m("",!0),Ue,e.averageRate>=3.5?u((i(),s("input",{key:3,type:"radio",value:"3.5","onUpdate:modelValue":n[8]||(n[8]=t=>e.averageRate=t),readonly:""},null,512)),[[r,e.averageRate]]):m("",!0),Ie,e.averageRate>=3?u((i(),s("input",{key:4,type:"radio",value:"3","onUpdate:modelValue":n[9]||(n[9]=t=>e.averageRate=t),readonly:""},null,512)),[[r,e.averageRate]]):m("",!0),De,e.averageRate>=2.5?u((i(),s("input",{key:5,type:"radio",value:"2.5","onUpdate:modelValue":n[10]||(n[10]=t=>e.averageRate=t),readonly:""},null,512)),[[r,e.averageRate]]):m("",!0),Be,e.averageRate>=2?u((i(),s("input",{key:6,type:"radio",value:"2","onUpdate:modelValue":n[11]||(n[11]=t=>e.averageRate=t),readonly:""},null,512)),[[r,e.averageRate]]):m("",!0),Ae,e.averageRate>=1.5?u((i(),s("input",{key:7,type:"radio",value:"1.5","onUpdate:modelValue":n[12]||(n[12]=t=>e.averageRate=t),readonly:""},null,512)),[[r,e.averageRate]]):m("",!0),we,e.averageRate>=1?u((i(),s("input",{key:8,type:"radio",value:"1","onUpdate:modelValue":n[13]||(n[13]=t=>e.averageRate=t),readonly:""},null,512)),[[r,e.averageRate]]):m("",!0),je,e.averageRate>=.5?u((i(),s("input",{key:9,type:"radio",value:"0.5","onUpdate:modelValue":n[14]||(n[14]=t=>e.averageRate=t),readonly:""},null,512)),[[r,e.averageRate]]):m("",!0),qe])]),a("div",xe,[Le,a("ul",Se,[(i(!0),s(A,null,w(e.reviewList,(t,V)=>(i(),s("li",{class:"review-item",key:V},[a("div",Ee,"작성자: "+C(t.name),1),a("div",Pe,"평점: "+C(t.rate)+"/5",1),a("fieldset",Qe,[u(a("input",{type:"radio",value:"5","onUpdate:modelValue":l=>t.rate=l,readonly:""},null,8,Te),[[r,t.rate]]),Fe,u(a("input",{type:"radio",value:"4.5","onUpdate:modelValue":l=>t.rate=l,readonly:""},null,8,Ne),[[r,t.rate]]),Je,u(a("input",{type:"radio",value:"4","onUpdate:modelValue":l=>t.rate=l,readonly:""},null,8,Me),[[r,t.rate]]),Oe,u(a("input",{type:"radio",value:"3.5","onUpdate:modelValue":l=>t.rate=l,readonly:""},null,8,ze),[[r,t.rate]]),Ge,u(a("input",{type:"radio",value:"3","onUpdate:modelValue":l=>t.rate=l,readonly:""},null,8,He),[[r,t.rate]]),Ke,u(a("input",{type:"radio",value:"2.5","onUpdate:modelValue":l=>t.rate=l,readonly:""},null,8,We),[[r,t.rate]]),Xe,u(a("input",{type:"radio",value:"2","onUpdate:modelValue":l=>t.rate=l,readonly:""},null,8,Ye),[[r,t.rate]]),Ze,u(a("input",{type:"radio",value:"1.5","onUpdate:modelValue":l=>t.rate=l,readonly:""},null,8,$e),[[r,t.rate]]),et,u(a("input",{type:"radio",value:"1","onUpdate:modelValue":l=>t.rate=l,readonly:""},null,8,tt),[[r,t.rate]]),at,u(a("input",{type:"radio",value:"0.5","onUpdate:modelValue":l=>t.rate=l,readonly:""},null,8,ot),[[r,t.rate]]),lt]),a("div",nt,C(t.content),1),it,u(a("input",{type:"text","onUpdate:modelValue":l=>t.reviewComment=l},null,8,st),[[j,t.reviewComment]]),a("button",{type:"button",onClick:l=>e.insertComment(t.reviewId)},"등록",8,dt),(i(!0),s(A,null,w(e.reviewCommentList,(l,v)=>(i(),s("div",{class:"comment-list",key:v},[l.reviewId===t.reviewId?(i(),s("div",ut,[e.editingCommentId===l.commentId?(i(),s("div",rt,[a("div",ct,"작성자: "+C(l.name),1),u(a("textarea",{"onUpdate:modelValue":n[15]||(n[15]=h=>e.reviewComment=h)},null,512),[[j,e.reviewComment]]),a("div",_t,"작성일: "+C(l.rdate),1),a("button",{onClick:h=>e.saveEditedComment(l.commentId)},"저장",8,mt)])):(i(),s("div",vt,[a("div",Ct,"작성자: "+C(l.name),1),a("div",gt,"내용: "+C(l.content),1),a("div",pt,"작성일: "+C(l.rdate),1),l.memberId===parseInt(e.userId)?(i(),s("div",yt,[a("button",{onClick:h=>e.updateComment(l.commentId,l.content)},"수정",8,ht),a("button",{onClick:h=>e.deleteComment(l.commentId)},"삭제",8,ft)])):m("",!0)]))])):m("",!0)]))),128))]))),128))])])])}const Ut=le(de,[["render",bt],["__scopeId","data-v-76315596"]]);export{Ut as default};
