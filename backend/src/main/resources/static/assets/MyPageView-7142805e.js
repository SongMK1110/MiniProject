import{Q as H,r as i,M as J,a as g,o,c as n,b as e,D as m,t as f,w as y,v as b,i as K,j as W,k as X,l as Y,m as ee,n as te,q as se,s as ae,x as le,y as oe,z as ne,A as ie,B as ce,C as ue,p as pe,h as _e,_ as de}from"./index-d96fb694.js";const u=x=>(pe("data-v-b3ac4e2f"),x=x(),_e(),x),re={class:"my-page"},ve=u(()=>e("h2",null,"마이 페이지",-1)),ge={class:"user-info"},me={class:"profile-picture"},fe=["src"],ye={style:{position:"absolute"}},be={key:0},he={key:1},ke={style:{"margin-top":"5px"}},we={class:"info"},xe={class:"item"},Ce=u(()=>e("span",{class:"label"},"아이디:",-1)),Pe={class:"value"},je={class:"item"},$e=u(()=>e("span",{class:"label"},"비밀번호:",-1)),Ie={key:0,class:"value"},Me={key:1,class:"value"},Ve={class:"password-change-fields"},Ue=u(()=>e("label",{for:"current-pw"},"현재 비밀번호:",-1)),Ne=u(()=>e("label",{for:"new-pw"},"신규 비밀번호:",-1)),ze=u(()=>e("label",{for:"confirm-new-pw"},"신규 비밀번호 재 입력:",-1)),De={class:"item"},Ee=u(()=>e("span",{class:"label"},"이름:",-1)),Se={class:"value"},Ae={class:"item"},Be=u(()=>e("span",{class:"label"},"닉네임:",-1)),Fe={key:0,class:"value"},Ze={key:1,class:"value"},Re={class:"password-change-fields"},Te=u(()=>e("ul",{style:{"font-size":"small"}},[e("li",null,"길이는 최대 15자 이내로 작성해주세요"),e("li",null,"중복 닉네임 불가합니다."),e("li",null,`이모티콘 및 일부 특수문자 사용 불가합니다. &<>()'/"`)],-1)),qe={class:"item"},Le=u(()=>e("span",{class:"label"},"이메일:",-1)),Oe={key:0,class:"value"},Qe={key:1,class:"value"},Ge={class:"password-change-fields"},He={class:"item"},Je=u(()=>e("span",{class:"label"},"휴대전화:",-1)),Ke={key:0,class:"value"},We={key:1,class:"value"},Xe={class:"password-change-fields"},Ye=H({__name:"MyPageView",setup(x){function E(s){return new URL(Object.assign({"/src/assets/images/검정 후드티.jpg":K,"/src/assets/images/검정 후드티2.jpg":W,"/src/assets/images/검정 후드티3.jpg":X,"/src/assets/images/고양이 이미지.png":Y,"/src/assets/images/나이키 바지.jpg":ee,"/src/assets/images/마이페이지.png":te,"/src/assets/images/슬랙스.jpg":se,"/src/assets/images/야구 잠바.jpg":ae,"/src/assets/images/양털 후리스.jpg":le,"/src/assets/images/청바지.jpg":oe,"/src/assets/images/체크셔츠.jpg":ne,"/src/assets/images/패딩 조끼.jpg":ie,"/src/assets/images/회색 후드티.jpg":ce,"/src/assets/images/회색 후드티2.jpg":ue})[`/src/assets/images/${s}`],self.location).href}function S(s){return"*".repeat(s.length)}const c=i(),h=i(!1),k=i(),v=i(),w=i(),C=i(!1),_=i(),P=i(!1),d=i(),j=i(!1),p=i(),$=i(null),I=i(!1);let r=null;const A=()=>{$.value&&$.value.click()},B=s=>{r=s.target.files[0],r&&console.log("선택된 파일:",r.name)},F=()=>{if(r){console.log("이미지 저장",r);const s=new FormData;s.append("uploadFile",r),console.log(r.files),g.post("api/uploadImg",s,{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{console.log(t)}).catch(t=>{console.log(t)})}else console.log("파일을 선택하세요.")},Z=()=>{var t;if(((t=c.value)==null?void 0:t.pw)!==k.value){alert("현재 비밀번호가 다릅니다."),k.value="";return}if(v.value!==w.value){alert("신규 비밀번호가 다릅니다."),v.value="",w.value="";return}window.confirm("변경 하시겠습니까?")&&g.post("api/updateMypage",{pw:v.value}).then(a=>{console.log(a),a.data==="success"&&location.reload()}).catch(a=>{console.log(a)})},R=()=>{h.value=!1,k.value="",v.value="",w.value=""},T=()=>{C.value=!1,_.value=""},q=()=>{if(window.confirm("변경 하시겠습니까?")){const t=/[&<>()'"/]/g;if(_.value&&_.value.match(t)){alert("이모티콘 및 일부 특수문자 사용 불가합니다."),_.value="";return}g.post("api/updateMypage",{nickname:_.value}).then(a=>{if(a.data==="success")location.reload();else if(a.data==="duplication"){alert("중복된 닉네임 입니다.");return}}).catch(a=>{console.log(a)})}},L=()=>{P.value=!1,d.value=""},O=()=>{const s=window.confirm("변경 하시겠습니까?"),t=/^[A-Za-z0-9_.-]+@[A-Za-z0-9-]+\.[A-Za-z0-9.-]+$/;if(s){if(d.value&&t.test(d.value)==!1){alert("이메일형식이 올바르지 않습니다."),d.value="";return}g.post("api/updateMypage",{email:d.value}).then(a=>{a.data==="success"&&location.reload()}).catch(a=>{console.log(a)})}},Q=()=>{j.value=!1,p.value=""},G=()=>{const s=window.confirm("변경 하시겠습니까?"),t=/01[016789]-[^0][0-9]{2,3}-[0-9]{3,4}/;if(s){if(p.value&&t.test(p.value)==!1){alert("휴대폰형식이 올바르지 않습니다."),p.value="";return}g.post("api/updateMypage",{phone:p.value}).then(a=>{a.data==="success"&&location.reload()}).catch(a=>{console.log(a)})}};return J(p,s=>{s&&(p.value=s.replace(/[^0-9]/g,"").replace(/^(\d{0,3})(\d{0,4})(\d{0,4})$/,"$1-$2-$3").replace(/(--)$/,""))}),g.get("api/selectMember").then(s=>{c.value=s.data}).catch(s=>{console.log(s)}),(s,t)=>{var a,M,V,U,N,z,D;return o(),n("div",re,[ve,e("div",ge,[e("div",me,[c.value?(o(),n("img",{key:0,src:E((a=c.value)==null?void 0:a.img),alt:"프로필 사진"},null,8,fe)):m("",!0),e("div",ye,[I.value?(o(),n("div",he,[e("button",{type:"button",onClick:A},"선택"),e("div",ke,[e("button",{type:"button",onClick:F,style:{"margin-right":"5px"}},"저장"),e("button",{type:"button",onClick:t[1]||(t[1]=l=>I.value=!1)},"취소")]),e("input",{type:"file",ref_key:"fileInput",ref:$,style:{display:"none"},onChange:B},null,544)])):(o(),n("div",be,[e("button",{type:"button",onClick:t[0]||(t[0]=l=>I.value=!0)},"변경")]))])]),e("div",we,[e("div",xe,[Ce,e("span",Pe,f((M=c.value)==null?void 0:M.id),1)]),e("div",je,[$e,c.value&&!h.value?(o(),n("span",Ie,f(S((V=c.value)==null?void 0:V.pw)),1)):h.value?(o(),n("span",Me,[e("div",Ve,[Ue,y(e("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=l=>k.value=l)},null,512),[[b,k.value]]),Ne,y(e("input",{type:"password","onUpdate:modelValue":t[3]||(t[3]=l=>v.value=l)},null,512),[[b,v.value]]),ze,y(e("input",{type:"password","onUpdate:modelValue":t[4]||(t[4]=l=>w.value=l)},null,512),[[b,w.value]])]),e("div",{style:{"text-align":"center"}},[e("button",{type:"button",style:{margin:"5px"},onClick:R},"취소"),e("button",{type:"button",style:{margin:"5px"},onClick:Z},"완료")])])):m("",!0),h.value?m("",!0):(o(),n("button",{key:2,type:"button",onClick:t[5]||(t[5]=l=>h.value=!0)},"변경"))]),e("div",De,[Ee,e("span",Se,f((U=c.value)==null?void 0:U.name),1)]),e("div",Ae,[Be,C.value?(o(),n("span",Ze,[e("div",Re,[Te,y(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=l=>_.value=l),placeholder:"닉네임 입력(최대 15자)",maxlength:"15"},null,512),[[b,_.value]])]),e("div",{style:{"text-align":"center"}},[e("button",{type:"button",style:{margin:"5px"},onClick:T},"취소"),e("button",{type:"button",style:{margin:"5px"},onClick:q},"완료")])])):(o(),n("span",Fe,f((N=c.value)==null?void 0:N.nickname),1)),C.value?m("",!0):(o(),n("button",{key:2,type:"button",onClick:t[7]||(t[7]=l=>C.value=!0)},"변경"))]),e("div",qe,[Le,P.value?(o(),n("span",Qe,[e("div",Ge,[y(e("input",{type:"email","onUpdate:modelValue":t[8]||(t[8]=l=>d.value=l),placeholder:"이메일을 입력해주세요"},null,512),[[b,d.value]])]),e("div",{style:{"text-align":"center"}},[e("button",{type:"button",style:{margin:"5px"},onClick:L},"취소"),e("button",{type:"button",style:{margin:"5px"},onClick:O},"완료")])])):(o(),n("span",Oe,f((z=c.value)==null?void 0:z.email),1)),P.value?m("",!0):(o(),n("button",{key:2,type:"button",onClick:t[9]||(t[9]=l=>P.value=!0)},"변경"))]),e("div",He,[Je,j.value?(o(),n("span",We,[e("div",Xe,[y(e("input",{type:"email","onUpdate:modelValue":t[10]||(t[10]=l=>p.value=l),maxlength:"13",placeholder:"휴대폰 번호를 입력해주세요"},null,512),[[b,p.value]])]),e("div",{style:{"text-align":"center"}},[e("button",{type:"button",style:{margin:"5px"},onClick:Q},"취소"),e("button",{type:"button",style:{margin:"5px"},onClick:G},"완료")])])):(o(),n("span",Ke,f((D=c.value)==null?void 0:D.phone),1)),j.value?m("",!0):(o(),n("button",{key:2,type:"button",onClick:t[11]||(t[11]=l=>j.value=!0)},"변경"))])])])])}}});const tt=de(Ye,[["__scopeId","data-v-b3ac4e2f"]]);export{tt as default};
